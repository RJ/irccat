IRCcat
======
As in `cat` to IRC. 

IRCcat does 2 things:

1) Listens on a specific ip:port and writes incoming data to an IRC channel.
   This is useful for sending various announcements and log messages to irc
   from shell scripts, Nagios and other services.

2) Hands off commands issued on irc to a handler program (eg: shell script)
   and responds to irc with the output of the handler script. This only 
   happens for commands addressed to irccat: or prefixed with ?.
   (easily extend irccat functionality with your own scripts)


Quick Ubuntu/Debian Installation
--------------------------------
$ sudo su -
# apt-get install netcat openjdk-6-jdk ant
# cd /usr/local/
# git clone https://github.com/Wirehive/irccat.git
# cd irccat/
# ant dist
# mkdir -p /etc/irccat
# cp ./examples/irccat.xml /etc/irccat/
# cp ./examples/init.d/irccat /etc/init.d/
# update-rc.d irccat defaults

Now edit /etc/irccat/irccat.xml for your channel details.

# /etc/init.d/irccat start.
# telnet localhost 12345

Now bash out some stuff and watch your IRC channel :)


Detailed Installation
---------------------
Edit the irccat.xml so it knows which irc server, channel etc..
Check you have sun jvm >=1.5 (java -version)

This will build and package irccat as a jar:

$ ant dist

Then, using the appropriate config file:

$ ant -Dconfigfile=./examples/irccat.xml run

Also, you'll probably want to install netcat.


Sending text to IRC
-------------------
By default IRCCat listens on 127.0.0.1:12345, and sends data to the 
default (first) channels.  In a networked server environment you will p
robably want to make it listen on the private LAN interface.

Examples: 

$ echo "Hello World" | netcat -q0 localhost 12345
$ tail -f /var/log/www/error.log | netcat localhost 12345

In a server environment, consider adding a hostname to your internal DNS or 
using a virtual IP for irccat to listen on, in case you want to move irccat
to another box later.


Sending to specific channels
----------------------------
To send to a specific channel rather than the default, put the channel name
as the first word in the data (the channel name will be stripped):

$ echo "#mychannel hello world" | netcat -q0 machinename 12345

This sends "hello world" to #mychannel

First word defines the recipients, you can use comma separated list. 
# prefix indicates channel, @ indicates a nick.

Examples:
	
	- "#chan blah blah"
	  just sends to #chan
	
	- "@RJ psst, this is a pm"
	  just sends via PM to user RJ
	
	- "#channel1,#channel2,@RJ,@Russ blah blah this is the message"
	  this sends to 2 channels, and 2 users (RJ, Russ)
	
	- "#* Attention, something important"
	  this sends to all channels the bot is in	


Changing topics in channels
---------------------------
To change the topic in a channel (rather than sending a message), use
the prefix %TOPIC.

$ echo "%TOPIC #mychannel hello world" | netcat -q0 machinename 12345

This changes the topic of #mychannel to "hello world" (assuming the bot
has permission to set the topic)

Second word defines the recipient channels. You can use a comma separated
list. Nick recipients will be accepted, but silently ignored.

Examples:

  - "%TOPIC #chan new topic"
    just changes the topic of #chan

  - "%TOPIC #channel1,#channel2 this channel is great"
    this changes the topics of two channels

  - "%TOPIC #* Important Topic"
    this changes the topics in all channels the bot is in


Built-in commands
-----------------
There are a handful of built-in commands for instructing the bot at runtime.

Built-in commands are prefixed with a !

	!join #chan pass		- joins another channel. pass is optional
	!part #chan				- parts chan
	!channels				- lists channels the bot is in
	!spam blah blah..		- repeats your message in all joined channels
	!exit					- System.exit()

Trust
-----
Any command (?.. !..) uttered in a channel with irccat in is executed and 
implicitly trusted. 

Any command PMed to irccat is ignored unless the user 
is joined to the default (first) channel in the config file.
	

SVN commit notifications
------------------------
svn hooks let you announce commits etc.
For example, try this in your SVN repo/hooks/post-commit file:

REPOS="$1"
REV="$2"
LOG=`/usr/bin/svnlook log -r $REV $REPOS`
AUTHOR=`/usr/bin/svnlook author -r $REV $REPOS`
echo "SVN commit by $AUTHOR (r$REV) '$LOG' http://web-svn-interface.example.com/?rev=$REV" | netcat -q0 machinename 12345


Nagios alerts to irc
--------------------
Check out our nagios IRC notification script from here:
https://github.com/Wirehive/nagiosplugins

Using Colours
-------------
There are shorthand codes for making use of color "MIRC Style". They are used
with a "%" immediately followed by the shorthand code. You then reset using the
shorthand code NORMAL.

For example:
Hello %REDthis%NORMAL was in red and %UNDERLINEthis%NORMAL was underlined.

Available shorthand codes are:
NORMAL
BOLD
UNDERLINE
REVERSE
WHITE
BLACK
DBLUE (Dark Blue)
DGREEN (Dark Green)
RED
BROWN
PURPLE
ORANGE (Olive)
YELLOW
GREEN
TEAL
CYAN
BLUE
PINK (Magenta)
DGRAY (Dark Gray)
GRAY (Light Gray)

Feedback
--------
irccat was originally created by RJ. Contact details below:
Email:  rj@metabrew.com
Web:    http://www.last.fm/user/RJ (work, and the reason irccat exists)
Web:    http://www.metabrew.com/   (blog)
Irc:    irc://irc.audioscrobbler.com/audioscrobbler
